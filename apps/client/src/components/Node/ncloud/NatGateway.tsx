import { useDimensionContext } from '@contexts/DimensionContext';
import { Node } from '@types';

type Props = Partial<Node>;

const convertToIsoMatrix = (x: number, y: number) => {
    const isoMatrix = new DOMMatrix()
        .rotate(30)
        .skewX(-30)
        .scale(1, 0.8602)
        .translate(x, y);

    return isoMatrix; // 결과 행렬 반환
};
const Node3D = ({ properties }: Props) => {
    const matrix = convertToIsoMatrix(0, 0);

    return (
        <svg width="123" height="108.05">
            <path
                fill="#ccc"
                stroke="#red"
                d="M38.23 22.751v53.738l29.756-16.317v-54.6Z"
                fill-rule="evenodd"
                stroke-linejoin="round"
                stroke-width="1.011"
            ></path>
            <path
                fill="#e6e6e6"
                stroke="#a4c4e3"
                d="m1 8.421 37.23 14.33v53.738L1 44.247Z"
                fill-rule="evenodd"
                stroke-linejoin="round"
            ></path>
            <path
                fill="#fff"
                stroke="#a4c4e3"
                d="M38.23 22.751 67.986 5.573 13.411 1.255 1.001 8.421z"
                fill-rule="evenodd"
                stroke-linejoin="round"
            ></path>
            <path
                fill="none"
                stroke="#4286c5"
                d="m1 44.247 37.23 32.242 29.756-16.317v-54.6l-55.165-4.55-11.82 6.826z"
                stroke-width="2"
            ></path>
            <path
                fill="#fff"
                stroke="#a4c4e3"
                d="M84.77 13.794 53.747 31.712l56.04 39.295L122 63.955z"
                fill-rule="evenodd"
                stroke-width="1.011"
            ></path>
            <path
                fill="#e6e6e6"
                stroke="#a4c4e3"
                d="M53.747 31.712v53.739l55.847 21.494.194-35.938z"
                fill-rule="evenodd"
            ></path>
            <path
                fill="#ccc"
                stroke="#a4c4e3"
                d="M109.788 71.007 122 63.955v35.823l-12.406 7.168z"
                fill-rule="evenodd"
            ></path>
            <path
                fill="none"
                stroke="#4286c5"
                d="M84.77 13.794 53.747 31.712v53.739l55.847 21.494L122 99.778V63.955z"
                stroke-width="2"
            ></path>
            <path
                fill="#4286c5"
                d="m70.23 74.7-5.769-2.228c-1.062-.41-1.923-.077-1.923.743v4.455c0 .82.861 1.817 1.923 2.227l5.769 2.227c1.062.41 1.923.077 1.923-.742v-4.455c0-.82-.86-1.817-1.923-2.227zm-1.442-4.27 11.538 4.455v2.228l2.884 1.113v-2.227l11.538 4.455v2.227l2.885 1.114v-2.673c0-.982-1.035-2.182-2.308-2.673L83.21 73.772v-2.97l2.404.928c1.062.41 1.923.077 1.923-.743v-4.455c0-.82-.86-1.817-1.923-2.227l-7.692-2.97c-1.062-.41-1.923-.077-1.923.743v4.454c0 .82.861 1.818 1.923 2.228l2.404.928v2.97l-12.115-4.677c-1.272-.492-2.308-.092-2.308.89v2.673l2.885 1.114zm15.865 9.838-5.77-2.227c-1.061-.41-1.922-.077-1.922.742v4.455c0 .82.86 1.817 1.923 2.227l5.769 2.228c1.061.41 1.923.077 1.923-.743v-4.454c0-.82-.862-1.818-1.923-2.228zm14.422 5.569-5.769-2.228c-1.062-.41-1.923-.077-1.923.743v4.455c0 .82.861 1.817 1.923 2.227l5.77 2.227c1.061.41 1.922.077 1.922-.742v-4.455c0-.82-.86-1.817-1.923-2.227z"
            ></path>
        </svg>
    );
};

const Node2D = ({ properties }: Props) => {
    return (
        <svg width="90" height="90">
            <g fill="#693cc5">
                <path d="M45 90a45 45 0 1 1 45-45 45.038 45.038 0 0 1-45 45Zm0-86.17A41.17 41.17 0 1 0 86.17 45 41.209 41.209 0 0 0 45 3.83Z"></path>
                <path d="M50.381 70.258H34.603v-3.83h13.863V27.173H34.603v-3.83H50.38a1.915 1.915 0 0 1 1.915 1.915v43.085a1.915 1.915 0 0 1-1.915 1.915z"></path>
                <path d="M34.239 44.886h34.104v3.83H34.24zM21.658 34.354a1.915 1.915 0 0 1-.824-.192 1.915 1.915 0 0 1-1.091-1.723V18.077a1.915 1.915 0 0 1 1.091-1.723 1.915 1.915 0 0 1 2.03.23l8.962 7.18a1.915 1.915 0 0 1 .728 1.494 1.915 1.915 0 0 1-.728 1.494l-8.962 7.18a1.915 1.915 0 0 1-1.206.422zm1.915-12.294v6.396l4.002-3.198zm-1.915 33.836a1.915 1.915 0 0 1-.824-.191 1.915 1.915 0 0 1-1.091-1.724V39.62a1.915 1.915 0 0 1 1.091-1.724 1.915 1.915 0 0 1 2.03.23l8.962 7.18a1.915 1.915 0 0 1 .728 1.495 1.915 1.915 0 0 1-.728 1.493l-8.962 7.181a1.915 1.915 0 0 1-1.206.421zm1.915-12.293v6.395l4.002-3.197z"></path>
                <path d="M70.124 57.677a2.03 2.03 0 0 1-.728-.134 1.915 1.915 0 0 1-1.187-1.78V37.82a1.915 1.915 0 0 1 3.275-1.36l8.98 8.98a1.915 1.915 0 0 1 0 2.7l-8.98 8.982a1.915 1.915 0 0 1-1.36.555zm1.915-15.32v8.714l4.366-4.347ZM21.658 75.64a1.915 1.915 0 0 1-.824-.192 1.915 1.915 0 0 1-1.091-1.723V59.362a1.915 1.915 0 0 1 3.121-1.493l8.962 7.18a1.915 1.915 0 0 1 0 2.988l-8.962 7.18a1.915 1.915 0 0 1-1.206.422Zm1.915-12.294v6.396l4.002-3.198z"></path>
            </g>
            <circle
                cx="45"
                cy="45"
                r="44.371"
                fill="#693cc5"
                opacity=".05"
            ></circle>
        </svg>
    );
};

export default ({ properties }: Partial<Node>) => {
    const { dimension } = useDimensionContext();
    return dimension === '2d' ? (
        <Node2D properties={properties} />
    ) : (
        <Node3D properties={properties} />
    );
};
